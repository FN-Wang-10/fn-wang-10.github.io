<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Nginx/Nginxå¸¸ç”¨é…ç½®" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Nginxå¸¸ç”¨é…ç½® | fn-wang-10.github.io</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fn-wang-10.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fn-wang-10.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fn-wang-10.github.io/docs/Nginx/Nginxå¸¸ç”¨é…ç½®"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Nginxå¸¸ç”¨é…ç½® | fn-wang-10.github.io"><meta data-rh="true" name="description" content="ä¸€ã€å¸¸ç”¨é…ç½®"><meta data-rh="true" property="og:description" content="ä¸€ã€å¸¸ç”¨é…ç½®"><link data-rh="true" rel="icon" href="/img/logo.ico"><link data-rh="true" rel="canonical" href="https://fn-wang-10.github.io/docs/Nginx/Nginxå¸¸ç”¨é…ç½®"><link data-rh="true" rel="alternate" href="https://fn-wang-10.github.io/docs/Nginx/Nginxå¸¸ç”¨é…ç½®" hreflang="en"><link data-rh="true" rel="alternate" href="https://fn-wang-10.github.io/docs/Nginx/Nginxå¸¸ç”¨é…ç½®" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="fn-wang-10.github.io RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="fn-wang-10.github.io Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce383e8f.css">
<script src="/assets/js/runtime~main.19d83602.js" defer="defer"></script>
<script src="/assets/js/main.bfc27d0f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.ico" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.ico" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">fn-wang-10</b></a><a class="navbar__item navbar__link" href="/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Nginx/CDN + Nginx æ€ä¹ˆç©çš„ä½ çŸ¥é“ä¸">CDN + Nginx æ€ä¹ˆç©çš„ä½ çŸ¥é“ä¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Nginx/">Nginx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Nginx/NginxåŸºç¡€">NginxåŸºç¡€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®">Nginxå¸¸ç”¨é…ç½®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Nginx/Nginxé…ç½®æ–‡ä»¶è§£æ">Nginxé…ç½®æ–‡ä»¶è§£æ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Nginxå¸¸ç”¨é…ç½®</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Nginxå¸¸ç”¨é…ç½®</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€å¸¸ç”¨é…ç½®">ä¸€ã€å¸¸ç”¨é…ç½®<a class="hash-link" aria-label="Direct link to ä¸€ã€å¸¸ç”¨é…ç½®" title="Direct link to ä¸€ã€å¸¸ç”¨é…ç½®" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#ä¸€å¸¸ç”¨é…ç½®">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-gzip-å‹ç¼©">1. gzip å‹ç¼©<a class="hash-link" aria-label="Direct link to 1. gzip å‹ç¼©" title="Direct link to 1. gzip å‹ç¼©" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#1-gzip-å‹ç¼©">â€‹</a></h3>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include          mime.conf;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default_type     application/octet-stream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gzip             on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gzip_min_length  1k;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gzip_comp_level  5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gzip_types       text/plain text/css application/x-javascript application/javascript text/javascript;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>éƒ¨åˆ†å‚æ•°å«ä¹‰ï¼š</p>
<table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>gzip_min_length</td><td>æ­£æ•´æ•°ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œä¹Ÿå¯ç”¨ k è¡¨ç¤ºåƒå­—èŠ‚ï¼Œæ¯”å¦‚å†™æˆ 1024 ä¸ 1k éƒ½å¯ä»¥ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œè¡¨ç¤ºå½“èµ„æºå¤§äº 1k æ—¶æ‰è¿›è¡Œå‹ç¼©ï¼Œèµ„æºå¤§å°å–å“åº”å¤´ä¸­çš„ Content-Length è¿›è¡Œæ¯”è¾ƒï¼Œç»æµ‹è¯•å¦‚æœå“åº”å¤´ä¸å­˜åœ¨ Content_length ä¿¡æ¯ï¼Œè¯¥é™åˆ¶å‚æ•°å¯¹äºè¿™ä¸ªå“åº”åŒ…æ˜¯ä¸èµ·ä½œç”¨çš„ï¼›å¦å¤–æ­¤å¤„å‚æ•°å€¼ä¸å»ºè®®è®¾çš„å¤ªå°ï¼Œå› ä¸ºè®¾çš„å¤ªå°ï¼Œä¸€äº›æœ¬æ¥å¾ˆå°çš„æ–‡ä»¶ç»è¿‡å‹ç¼©ååè€Œå˜å¤§äº†ï¼Œå®˜ç½‘æ²¡æœ‰ç»™å‡ºå»ºè®®å€¼ï¼Œåœ¨æ­¤å»ºè®® 1k èµ·ï¼Œå› ä¸ºå°äº 1k çš„ä¹Ÿæ²¡å¿…è¦å‹ç¼©ï¼Œå¹¶æ ¹æ®å®é™…æƒ…å†µæ¥è°ƒæ•´è®¾å®šã€‚</td></tr><tr><td>gzip_comp_level</td><td>1-9 çš„æ­£æ•´æ•°ï¼Œ1 æœ€ä½ï¼Œå‹ç¼©æ—¶é—´çŸ­ï¼Œ9 æœ€é«˜ï¼Œå‹ç¼©æ—¶é—´é•¿ï¼Œåƒ cpuï¼Œä½†æ˜¯å‹ç¼©æ•ˆæœå¥½ï¼Œå®è´¨æ˜¯ç”¨ cpu æ¢æµé‡ï¼Œè§†æƒ…å†µè€Œç”¨ã€‚</td></tr><tr><td>gzip_types</td><td>å“åº”æŠ¥æ–‡æ•°æ®æ ¼å¼ï¼Œæˆ–è€…è¯´ç±»å‹ï¼Œå¯¹åº” http å“åº”å¤´ä¸­çš„ Content-type å­—æ®µï¼Œå¦‚å¸¸è§çš„æœ‰ text/htmlã€text/cssã€application/jsonã€application/javaScript ç­‰ã€‚ç”¨äºæŒ‡å®šè¦å‹ç¼©çš„å“åº”æŠ¥æ–‡ç±»å‹ã€‚â€*â€è¡¨ç¤ºå‹ç¼©æ‰€æœ‰æ ¼å¼çš„å“åº”æŠ¥æ–‡ï¼Œå¤šç§æ ¼å¼ç”¨ç©ºæ ¼éš”å¼€ã€‚å¦‚ text/html text/cssã€‚â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</td></tr><tr><td>gzip_http_version</td><td>é»˜è®¤ä¸º 1.1ï¼Œæ­¤å¤„åªèƒ½æ˜¯ 1.0ï¼Œæˆ–è€… 1.1ã€‚è®¾ç½®å‹ç¼©å“åº”æ‰€éœ€çš„æœ€å° http åè®®ç‰ˆæœ¬ã€‚</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-é…ç½®-https">2. é…ç½® https<a class="hash-link" aria-label="Direct link to 2. é…ç½® https" title="Direct link to 2. é…ç½® https" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#2-é…ç½®-https">â€‹</a></h3>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen       80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name  127.0.0.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		# ä»¥ä¸‹æ˜¯æ”¯æŒhttpsçš„é…ç½®ï¼Œå…¶ä¸­pemå’Œkeyè¯ä¹¦æ–‡ä»¶éœ€è¦å»CAæœºæ„ç”³è¯·ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		# ç”³è¯·åä¼šè·å¾—è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå°†è¿™ä¸¤ä¸ªæ”¾åœ¨æœåŠ¡å™¨æŒ‡å®šç›®å½•ï¼Œå¦‚æ­¤é…ç½®èƒ½è®¿é—®åˆ°å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_certificate      /etc/nginx/ssl_certs/draw.lyan.me.pem;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_certificate_key  /etc/nginx/ssl_certs/draw.lyan.me.key;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_session_timeout  5m;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_prefer_server_ciphers  on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-å…è®¸è·¨åŸŸè®¿é—®">3. å…è®¸è·¨åŸŸè®¿é—®<a class="hash-link" aria-label="Direct link to 3. å…è®¸è·¨åŸŸè®¿é—®" title="Direct link to 3. å…è®¸è·¨åŸŸè®¿é—®" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#3-å…è®¸è·¨åŸŸè®¿é—®">â€‹</a></h3>
<p>å¯å°†ä¸‹é¢é…ç½®æ·»åŠ åˆ°æŒ‡å®š<code>location</code>ä¸­æˆ–è€…<code>server</code>ä¸­ã€‚</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># *è¡¨ç¤ºå…è®¸æ‰€æœ‰ç«™è·¨åŸŸè®¿é—®ï¼ˆä¸å®‰å…¨ï¼Œå»ºè®®æŒ‡å®šå…·ä½“å…è®¸çš„åŸŸåå¦‚ï¼šhttp://b.domain.com:9000ï¼ˆæ³¨æ„æ ¼å¼ï¼šhttp(s):// + domain + portï¼Œæœ«å°¾ä¹Ÿä¸èƒ½åŠ /ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_header Access-Control-Allow-Origin *;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#æ­¤é¡¹ä¸ºå…è®¸å¸¦cookieè·¨åŸŸè®¿é—®ï¼Œè‹¥è®¾ç½®trueï¼Œä¸Šé¢åŸŸåé…ç½®ä¸èƒ½ä¸º*ï¼Œå¿…é¡»æŒ‡å®šå…·ä½“åŸŸå</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_header Access-Control-Allow-Credentials true;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-iframe-åŒæºç­–ç•¥é™åˆ¶">4. iframe åŒæºç­–ç•¥é™åˆ¶<a class="hash-link" aria-label="Direct link to 4. iframe åŒæºç­–ç•¥é™åˆ¶" title="Direct link to 4. iframe åŒæºç­–ç•¥é™åˆ¶" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#4-iframe-åŒæºç­–ç•¥é™åˆ¶">â€‹</a></h3>
<p>é™åˆ¶ iframe æ’å…¥ï¼Œå¯è®¾ç½®ä¸ºéåŒæºä¸æ’å…¥ï¼ŒæŒ‡å®š origin æ’å…¥ï¼Œé»˜è®¤ä¸ºä¸é™åˆ¶</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># é™åˆ¶ä¸ºåŒæºå¯ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_header X-Frame-Options SAMEORIGIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŒ‡å®šç½‘ç«™å¯ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_header X-Frame-Options &quot;ALLOW-FROM http://xxx.com:8000&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_header Content-Security-Policy &quot;frame-ancestors http://xxx.com:8000&quot;; # å…¼å®¹chrome</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-æ ‡å‡†-root-é¡µé¢é…ç½®">5. æ ‡å‡† root é¡µé¢é…ç½®<a class="hash-link" aria-label="Direct link to 5. æ ‡å‡† root é¡µé¢é…ç½®" title="Direct link to 5. æ ‡å‡† root é¡µé¢é…ç½®" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#5-æ ‡å‡†-root-é¡µé¢é…ç½®">â€‹</a></h3>
<p>ä¸€èˆ¬ç”¨åœ¨å®˜ç½‘ç­‰èƒ½ç›´æ¥é€šè¿‡åŸŸåå°±æ‰“å¼€çš„é¡¹ç›®ï¼Œä¸éœ€è¦æ·»åŠ å…¶ä»–çš„ location é…ç½®ï¼ŒåªåŒ¹é…æ ¹è·¯å¾„ï¼Œå¦‚ä»¥ä¸‹é¡¹ç›®å¯ç›´æ¥é€šè¿‡<code>http://www.xxx.com</code>è®¿é—®ã€‚</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen       80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name  www.xxx.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        root   /app/xxx;  # é¡¹ç›®æ‰€åœ¨ç›®å½•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        index  index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try_files  $uri $uri/ /index.html;  # vueå•é¡µåº”ç”¨éœ€è¦è·¯ç”±å§‹ç»ˆæŒ‡å‘index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-æ ¹æ®è·¯å¾„è®¿é—®ä¸åŒå‰ç«¯é™æ€é¡µé¢é¡¹ç›®">6. æ ¹æ®è·¯å¾„è®¿é—®ä¸åŒå‰ç«¯é™æ€é¡µé¢é¡¹ç›®<a class="hash-link" aria-label="Direct link to 6. æ ¹æ®è·¯å¾„è®¿é—®ä¸åŒå‰ç«¯é™æ€é¡µé¢é¡¹ç›®" title="Direct link to 6. æ ¹æ®è·¯å¾„è®¿é—®ä¸åŒå‰ç«¯é™æ€é¡µé¢é¡¹ç›®" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#6-æ ¹æ®è·¯å¾„è®¿é—®ä¸åŒå‰ç«¯é™æ€é¡µé¢é¡¹ç›®">â€‹</a></h3>
<p>åŒ¹é…ç‰¹æ®Šè·¯å¾„ï¼Œç”¨åœ¨å½“å‰åŸŸåä¸‹æœ‰å¤šä¸ªé¡¹ç›®ï¼Œéœ€è¦é€šè¿‡è·¯å¾„æ¥åŒºåˆ†è®¿é—®çš„æƒ…å†µï¼Œå¦‚ä»¥ä¸‹é…ç½®åˆ™éœ€è¦é€šè¿‡<code>http://www.xxx.com/app-h5</code>æ‰èƒ½è®¿é—®ã€‚</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		listen       80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name  www.xxx.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /app-h5 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  try_files $uri $uri/ /app-h5/index.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  alias /usr/share/nginx/html/h5/mobile/app-h5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  index index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-æ¥å£åå‘ä»£ç†">7. æ¥å£åå‘ä»£ç†<a class="hash-link" aria-label="Direct link to 7. æ¥å£åå‘ä»£ç†" title="Direct link to 7. æ¥å£åå‘ä»£ç†" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#7-æ¥å£åå‘ä»£ç†">â€‹</a></h3>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">location /app-api {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_pass   http://b.domain.com:9000;  # ç›¸å¯¹è·¯å¾„ï¼Œæœ€ç»ˆåœ°å€ä¼šåŠ ä¸Š/app-apiï¼Œå˜æˆ /app-api/xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		# proxy_pass   http://b.domain.com:9000/;  # ç»å¯¹åœ°å€ï¼Œæœ€ç»ˆåœ°å€ä¼šèˆå¼ƒ/app-apiï¼Œå˜æˆ /xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		# proxy_cookie_domain   b.domain.com a.domain.com; # éœ€è¦ä¿®æ”¹æ¥å£è¿”å›çš„cookieåŸŸåæ—¶ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-upstream-è´Ÿè½½å‡è¡¡">8. upstream è´Ÿè½½å‡è¡¡<a class="hash-link" aria-label="Direct link to 8. upstream è´Ÿè½½å‡è¡¡" title="Direct link to 8. upstream è´Ÿè½½å‡è¡¡" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#8-upstream-è´Ÿè½½å‡è¡¡">â€‹</a></h3>
<aside><p>ğŸ’¡ upstream ç”¨æ¥é…ç½®è´Ÿè½½å‡è¡¡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ upstream ä¸èƒ½é…ç½®åœ¨ server å—å†…ï¼Œå³ä¸èƒ½è·Ÿ location åœ¨åŒä¸€çº§åˆ«ï¼Œéœ€è¦é…ç½®åœ¨ http å—å†…ï¼Œserver å—å¤–ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p></aside>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># é»˜è®¤è½®è¯¢é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen       80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name  127.0.0.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /app-api {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass   http://appServer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>å…­å¤§è´Ÿè½½å‡è¡¡è°ƒåº¦ç­–ç•¥é…ç½®</li>
</ul>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># åŠ æƒè½®è¯¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000 weight=10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000 weight=20; # è¯¥æœåŠ¡å™¨æ”¶åˆ°çš„è¿æ¥æ•°å 2/3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ip_hashï¼Œä¸å¯ç»™æœåŠ¡å™¨åŠ æƒé‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ip_hash;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># url_hash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hash $request_uri;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># fair(ç¬¬ä¸‰æ–¹)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fair;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># least_connï¼Œæœ€å°‘è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    least_conn;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>è°ƒåº¦ç®—æ³•</th><th>æ¦‚è¿°</th></tr></thead><tbody><tr><td>è½®è¯¢</td><td>é€ä¸€è½®è¯¢ï¼Œé»˜è®¤ç®—æ³•</td></tr><tr><td>weight è½®è¯¢</td><td>åŠ æƒè½®è¯¢ï¼Œweight è¶Šå¤§ï¼Œè½®è¯¢åˆ°çš„å‡ ç‡è¶Šå¤§</td></tr><tr><td>fair</td><td>æ ¹æ®åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…</td></tr><tr><td>ip_hash</td><td>æ ¹æ® ip çš„ hash ç»“æœè¿›è¡Œåˆ†é…ï¼Œæ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚å¯ä»¥æ‰“åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œèƒ½è§£å†³åå° session ä¸å…±äº«çš„é—®é¢˜</td></tr><tr><td>url_hash</td><td>æ ¹æ®è®¿é—®çš„ url è¿›è¡Œ hash åˆ†é…</td></tr><tr><td>least_conn</td><td>æœ€å°è¿æ¥æ•°ï¼Œå“ªä¸ªæœåŠ¡å™¨è¿æ¥æ•°å°‘åˆ†é…ç»™å“ªä¸ªæœåŠ¡å™¨</td></tr><tr><td>hash å…³é”®æ•°å€¼</td><td>hash è‡ªå®šä¹‰ key</td></tr></tbody></table>
<ul>
<li>nginx è´Ÿè½½å‡è¡¡é…ç½®çŠ¶æ€</li>
</ul>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># åŠ æƒè½®è¯¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000 weight=10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000 weight=20; # è¯¥æœåŠ¡å™¨æ”¶åˆ°çš„è¿æ¥æ•°å 2/3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># max_fails  fail_timeoutï¼Œå…è®¸è¯·æ±‚å¤±è´¥æ¬¡æ•°å’Œå¤±è´¥ä¹‹åç­‰å¾…æ—¶é—´ï¼Œä¸¤ä¸ªå¿…é¡»åŒæ—¶é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¸€ä¸‹é…ç½®ä»£è¡¨80çš„æœåŠ¡å™¨å…è®¸å¤±è´¥3æ¬¡ï¼Œè¶…è¿‡3æ¬¡åï¼Œåœ¨15ç§’å†…è¯·æ±‚å°†ä¸å†å‘é€ç»™è¯¥æœåŠ¡å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000 weight=10 max_fails=3 fail_timeout=15;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000 weight=20;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># backup å¤‡ä»½æœºï¼Œæ‰€æœ‰æœåŠ¡æŒ‚äº†ä¹‹åæ‰ä¼šç”Ÿæ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000 weight=10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000 weight=20;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.82:5000 backup;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># down æ ‡è¯†ä¸€å°æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè²Œä¼¼æ²¡å•¥ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000 weight=10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000 weight=20;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server 10.0.0.81:5000 down;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># max_conn æœ€å¤§è¿æ¥æ•°ï¼Œè¶…è¿‡è¿™ä¸ªè¿æ¥æ•°é‡ï¼Œå°†ä¸ä¼šåˆ†é…æ–°çš„è¿æ¥ç»™å®ƒï¼Œé»˜è®¤ä¸º0ï¼Œæ²¡æœ‰é™åˆ¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream appServer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.80:5000 weight=10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 10.0.0.81:5000 max_conn=1000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>çŠ¶æ€</th><th>æ¦‚è¿°</th></tr></thead><tbody><tr><td>down</td><td>å½“å‰çš„ server æš‚ä¸å‚ä¸è´Ÿè½½å‡è¡¡</td></tr><tr><td>backup</td><td>é¢„ç•™çš„å¤‡ä»½æœåŠ¡å™¨ï¼Œå½“å…¶ä»–æœåŠ¡å™¨éƒ½æŒ‚äº†çš„æ—¶å€™å¯ç”¨</td></tr><tr><td>max_fails</td><td>å…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•° ï¼Œå¦‚æœè¯·æ±‚å¤±è´¥æ¬¡æ•°è¶…è¿‡é™åˆ¶ï¼Œåˆ™è¿›è¿‡ fail_timeout æ—¶é—´åä»è™šæ‹ŸæœåŠ¡æ± ä¸­ kill æ‰è¯¥æœåŠ¡å™¨</td></tr><tr><td>fail_timeout</td><td>ç»è¿‡ max_fails å¤±è´¥åï¼ŒæœåŠ¡æš‚åœæ—¶é—´ï¼Œmax_fails è®¾ç½®åï¼Œå¿…é¡»è®¾ç½® fail_timeout å€¼</td></tr><tr><td>max_conn</td><td>é™åˆ¶æœ€å¤§çš„è¿æ¥æ•°ï¼Œç”¨äºæœåŠ¡å™¨ç¡¬ä»¶é…ç½®ä¸åŒçš„æƒ…å†µä¸‹</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-é…ç½®é•¿è¿æ¥">9. é…ç½®é•¿è¿æ¥<a class="hash-link" aria-label="Direct link to 9. é…ç½®é•¿è¿æ¥" title="Direct link to 9. é…ç½®é•¿è¿æ¥" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#9-é…ç½®é•¿è¿æ¥">â€‹</a></h3>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸‹å®ç°çš„æ˜¯ä¸€ä¸ªç»´æŒ90ç§’çš„é•¿è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¦‚æœæƒ³å®ç°ä¸€ä¸ªæ°¸ä¹…ä¸æ–­çš„é“¾æ¥ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼šä¸€æ˜¯ç›´è¿åç«¯æœåŠ¡ï¼Œä¸ç»è¿‡nginxï¼›äºŒæ˜¯ç”¨ä¸‹é¢çš„é…ç½®ï¼ŒåŒæ—¶è¦å®ç°ä¸€ä¸ª90ç§’ä»¥å†…çš„å¿ƒè·³ï¼Œä¿è¯è¿æ¥ä¸æ–­å¼€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  keepalive_timeout  90s 90s; # æ­¤ä¸¤ä¸ªå‚æ•°ä¸»è¦å®ç°ä»å®¢æˆ·ç«¯åˆ°nginxçš„é•¿è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  keepalive_requests 10000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen       80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name  www.xxx.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_max_body_size    100m;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    upstream  BACKEND {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      server   192.168.0.1ï¼š8080  weight=1 max_fails=2 fail_timeout=30s;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server   192.168.0.2ï¼š8080  weight=1 max_fails=2 fail_timeout=30s;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      keepalive 300;        // è¿™ä¸ªå¾ˆé‡è¦ï¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      root   /app/xxx;  # é¡¹ç›®æ‰€åœ¨ç›®å½•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      index  index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try_files  $uri $uri/ /index.html;  # vueå•é¡µåº”ç”¨éœ€è¦è·¯ç”±å§‹ç»ˆæŒ‡å‘index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /mqtt {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       proxy_pass http://BACKEND;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       proxy_http_version 1.1;  # æ­¤å¤„ä¸¤ä¸ªå‚æ•°å®ç°nginxåˆ°åç«¯çš„é•¿è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       proxy_set_header Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       proxy_set_header Connection &quot;upgrade&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       proxy_read_timeout 90;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       proxy_send_timeout 90;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       proxy_connect_timeout 90;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-é™åˆ¶-ip-è®¿é—®">10. é™åˆ¶ ip è®¿é—®<a class="hash-link" aria-label="Direct link to 10. é™åˆ¶ ip è®¿é—®" title="Direct link to 10. é™åˆ¶ ip è®¿é—®" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#10-é™åˆ¶-ip-è®¿é—®">â€‹</a></h3>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#é™åˆ¶IPè®¿é—®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deny 192.168.0.2ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allow 192.168.0.0/24;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allow 192.168.1.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deny all;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-é…ç½®ç§»åŠ¨ç«¯è®¿é—®">11. é…ç½®ç§»åŠ¨ç«¯è®¿é—®<a class="hash-link" aria-label="Direct link to 11. é…ç½®ç§»åŠ¨ç«¯è®¿é—®" title="Direct link to 11. é…ç½®ç§»åŠ¨ç«¯è®¿é—®" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#11-é…ç½®ç§»åŠ¨ç«¯è®¿é—®">â€‹</a></h3>
<p>æ­¤é…ç½®å¯ä»¥ç”¨æ¥åšä¸åŒç«¯çš„è‡ªé€‚åº”ï¼Œå³é€šè¿‡<code>$http_user_agent</code>åˆ¤æ–­è®¾å¤‡ç±»å‹ï¼Œè¿”å›ä¸åŒçš„æ–‡ä»¶ï¼Œæˆ–è€…é‡å®šå‘åˆ°ä¸åŒçš„ç½‘å€ã€‚</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># æ”¾åœ¨serveré‡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ($http_user_agent !~* (mobile|nokia|iphone|ipad|android|samsung|htc|blackberry)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rewrite  ^(.*)    http://www.abc.com$1 permanent;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-é…ç½®æ–‡ä»¶æœåŠ¡å™¨">12. é…ç½®æ–‡ä»¶æœåŠ¡å™¨<a class="hash-link" aria-label="Direct link to 12. é…ç½®æ–‡ä»¶æœåŠ¡å™¨" title="Direct link to 12. é…ç½®æ–‡ä»¶æœåŠ¡å™¨" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#12-é…ç½®æ–‡ä»¶æœåŠ¡å™¨">â€‹</a></h3>
<p>æ‰€è°“æ–‡ä»¶æœåŠ¡å™¨å°±æ˜¯é€šè¿‡æµè§ˆå™¨å¯ä»¥ç›´æ¥æ‰“å¼€æœåŠ¡å™¨çš„æ–‡ä»¶ï¼Œç‚¹å‡»å¯ä»¥ç›´æ¥ä¸‹è½½ï¼Œè¿™æ ·å°±ä¸ç”¨ä¸“é—¨å†™ä¸‹è½½çš„é¡µé¢ï¼Œç®€å•æ˜äº†ã€‚</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># éœ€è¦æ³¨æ„çš„æ˜¯é…ç½®æ–‡ä»¶éœ€è¦ä»¥rootç”¨æˆ·å¯åŠ¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user root root;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é…ç½®ç›®å½•æ ‘é¡µé¢url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location /download {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alias /home/download/;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        autoindex on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        autoindex_exact_size off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        autoindex_localtime on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        charset utf-8,gbk;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¿®æ”¹å¤´éƒ¨å­—æ®µContent-Dispositionï¼Œç›´æ¥æ‰“å¼€ä¸‹è½½æ¡†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location ~ ^/home/download(.*)$ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        add_header Content-Disposition &quot;attachment;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filename=$1&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="äºŒå…·ä½“å‚æ•°å«ä¹‰">äºŒã€å…·ä½“å‚æ•°å«ä¹‰<a class="hash-link" aria-label="Direct link to äºŒã€å…·ä½“å‚æ•°å«ä¹‰" title="Direct link to äºŒã€å…·ä½“å‚æ•°å«ä¹‰" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#äºŒå…·ä½“å‚æ•°å«ä¹‰">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="location-è·¯å¾„åŒ¹é…">location è·¯å¾„åŒ¹é…<a class="hash-link" aria-label="Direct link to location è·¯å¾„åŒ¹é…" title="Direct link to location è·¯å¾„åŒ¹é…" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#location-è·¯å¾„åŒ¹é…">â€‹</a></h3>
<table><thead><tr><th>å¼€å¤´</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>ä»¥ = å¼€å¤´</td><td>è¡¨ç¤ºç²¾ç¡®åŒ¹é…ï¼›å¦‚åªåŒ¹é…æ ¹ç›®å½•ç»“å°¾çš„è¯·æ±‚ï¼Œåé¢ä¸èƒ½å¸¦ä»»ä½•å­—ç¬¦ä¸²</td></tr><tr><td>ä»¥ ~ å¼€å¤´</td><td>è¡¨ç¤ºåŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…</td></tr><tr><td>ä»¥ ~* å¼€å¤´</td><td>è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…</td></tr><tr><td>ä»¥ ^~ å¼€å¤´</td><td>è¡¨ç¤º uri ä»¥æŸä¸ªå¸¸è§„å­—ç¬¦ä¸²å¼€å¤´ï¼Œä¸æ˜¯æ­£åˆ™åŒ¹é…</td></tr><tr><td>ä»¥ / å¼€å¤´</td><td>é€šç”¨åŒ¹é…, å¦‚æœæ²¡æœ‰å…¶å®ƒåŒ¹é…,ä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Nginx/NginxåŸºç¡€"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">NginxåŸºç¡€</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Nginx/Nginxé…ç½®æ–‡ä»¶è§£æ"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nginxé…ç½®æ–‡ä»¶è§£æ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#ä¸€å¸¸ç”¨é…ç½®">ä¸€ã€å¸¸ç”¨é…ç½®</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#1-gzip-å‹ç¼©">1. gzip å‹ç¼©</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#2-é…ç½®-https">2. é…ç½® https</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#3-å…è®¸è·¨åŸŸè®¿é—®">3. å…è®¸è·¨åŸŸè®¿é—®</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#4-iframe-åŒæºç­–ç•¥é™åˆ¶">4. iframe åŒæºç­–ç•¥é™åˆ¶</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#5-æ ‡å‡†-root-é¡µé¢é…ç½®">5. æ ‡å‡† root é¡µé¢é…ç½®</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#6-æ ¹æ®è·¯å¾„è®¿é—®ä¸åŒå‰ç«¯é™æ€é¡µé¢é¡¹ç›®">6. æ ¹æ®è·¯å¾„è®¿é—®ä¸åŒå‰ç«¯é™æ€é¡µé¢é¡¹ç›®</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#7-æ¥å£åå‘ä»£ç†">7. æ¥å£åå‘ä»£ç†</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#8-upstream-è´Ÿè½½å‡è¡¡">8. upstream è´Ÿè½½å‡è¡¡</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#9-é…ç½®é•¿è¿æ¥">9. é…ç½®é•¿è¿æ¥</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#10-é™åˆ¶-ip-è®¿é—®">10. é™åˆ¶ ip è®¿é—®</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#11-é…ç½®ç§»åŠ¨ç«¯è®¿é—®">11. é…ç½®ç§»åŠ¨ç«¯è®¿é—®</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#12-é…ç½®æ–‡ä»¶æœåŠ¡å™¨">12. é…ç½®æ–‡ä»¶æœåŠ¡å™¨</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#äºŒå…·ä½“å‚æ•°å«ä¹‰">äºŒã€å…·ä½“å‚æ•°å«ä¹‰</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/Nginx/Nginxå¸¸ç”¨é…ç½®#location-è·¯å¾„åŒ¹é…">location è·¯å¾„åŒ¹é…</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>